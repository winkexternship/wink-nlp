var syllables=require("./syllables.js");const consts=require("./constants.js"),tkSize=consts.tkSize;var readabilityStats=function(rdd,its){var token,cache=rdd.cache,tokens=rdd.tokens,numOfSentences=rdd.sentences.length,numOfWords=0,numOfSyllables=0,complexWords=Object.create(null),fres=121;for(let k=0;k<tokens.length;k+=1){if("word"===its.type(k,tokens,cache)){token=its.normal(k,tokens,cache),numOfWords+=1;const ns=syllables(token.toLowerCase());numOfSyllables+=ns,ns>3&&(complexWords[token]=ns-3)}fres=206.835-1.015*numOfWords/numOfSentences-84.6*numOfSyllables/numOfWords}const readingTimeInMins=numOfWords/(200+fres);return{fres:Math.round(fres),sentiment:+rdd.document[3].toFixed(2),numOfTokens:tokens.length/tkSize,numOfWords:numOfWords,numOfComplexWords:Object.keys(complexWords).length,complexWords:complexWords,numOfSentences:numOfSentences,readingTimeMins:Math.floor(readingTimeInMins),readingTimeSecs:Math.round(60*(readingTimeInMins-Math.floor(readingTimeInMins)))}};module.exports=readabilityStats;